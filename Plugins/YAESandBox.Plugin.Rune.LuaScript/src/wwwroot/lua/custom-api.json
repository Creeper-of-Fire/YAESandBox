{
  "ctx": {
    "documentation": "全局上下文对象，用于在工作流节点之间传递数据。",
    "methods": [
      {
        "name": "get",
        "signature": "ctx.get(variableName: string): any",
        "documentation": "从上下文中读取一个变量。\n\n**示例:**\n```lua\nlocal user_name = ctx.get(\"username\")\n```",
        "insertText": "get('${1:variableName}')"
      },
      {
        "name": "set",
        "signature": "ctx.set(variableName: string, value: any): void",
        "documentation": "向上下文中写入或更新一个变量。\n\n**示例:**\n```lua\nctx.set(\"user_id\", 12345)\n```",
        "insertText": "set('${1:variableName}', ${2:value})"
      }
    ]
  },
  "log": {
    "documentation": "全局日志对象，用于在调试输出中记录信息。",
    "methods": [
      {
        "name": "info",
        "signature": "log.info(message: string): void",
        "documentation": "记录一条信息级别的日志。\n\n**示例:**\n```lua\nlog.info(\"处理用户数据...\")\n```",
        "insertText": "info('${1:message}')"
      },
      {
        "name": "warn",
        "signature": "log.warn(message: string): void",
        "documentation": "记录一条警告级别的日志。\n\n**示例:**\n```lua\nlog.warn(\"某个字段值为空\")\n```",
        "insertText": "warn('${1:message}')"
      },
      {
        "name": "error",
        "signature": "log.error(message: string): void",
        "documentation": "记录一条错误级别的日志。\n\n**示例:**\n```lua\nlog.error(\"无法连接到数据库\")\n```",
        "insertText": "error('${1:message}')"
      }
    ]
  },
  "json": {
    "documentation": "全局 JSON 处理对象，用于序列化和反序列化。",
    "methods": [
      {
        "name": "encode",
        "signature": "json.encode(value: table | any): string",
        "documentation": "将一个 Lua table 或其他值序列化为 JSON 字符串。\n\n**示例:**\n```lua\nlocal user = { id = 1, name = \"Alice\" }\nlocal user_json = json.encode(user)\n-- user_json 的值为 '{\"id\":1,\"name\":\"Alice\"}'\n```",
        "insertText": "encode(${1:value})"
      },
      {
        "name": "decode",
        "signature": "json.decode(jsonString: string): table",
        "documentation": "将一个 JSON 字符串反序列化为 Lua table。\n\n**示例:**\n```lua\nlocal json_str = '{\"id\":1,\"name\":\"Alice\"}'\nlocal user_data = json.decode(json_str)\nlog.info(user_data.name) -- 输出 'Alice'\n```",
        "insertText": "decode('${1:jsonString}')"
      }
    ]
  },
  "regex": {
    "documentation": "全局正则表达式对象，用于字符串匹配。",
    "methods": [
      {
        "name": "is_match",
        "signature": "regex.is_match(input: string, pattern: string): boolean",
        "documentation": "检查输入字符串是否匹配指定的正则表达式模式。\n\n**示例:**\n```lua\nlocal is_email = regex.is_match(\"test@example.com\", \"^%S+@%S+%.%S+$\")\n```",
        "insertText": "is_match('${1:input}', '${2:pattern}')"
      },
      {
        "name": "match",
        "signature": "regex.match(input: string, pattern: string): string | nil",
        "documentation": "返回输入字符串中第一个匹配正则表达式的子串。\n\n**示例:**\n```lua\nlocal text = \"用户ID是: 12345\"\nlocal user_id = regex.match(text, \"%d+\") -- 返回 \"12345\"\n```",
        "insertText": "match('${1:input}', '${2:pattern}')"
      },
      {
        "name": "match_all",
        "signature": "regex.match_all(input: string, pattern: string): table",
        "documentation": "返回一个包含所有匹配项的 table。\n\n**示例:**\n```lua\nlocal text = \"我有 2 个苹果和 3 个香蕉\"\nlocal numbers = regex.match_all(text, \"%d+\")\n-- numbers table 将是 { \"2\", \"3\" }\nfor i, num in ipairs(numbers) do\n  log.info(num)\nend\n```",
        "insertText": "match_all('${1:input}', '${2:pattern}')"
      }
    ]
  },
  "datetime": {
    "documentation": "全局日期时间处理对象。用于获取、解析和操作日期时间。",
    "methods": [
      {
        "name": "utcnow",
        "signature": "datetime.utcnow(): DateTimeObject",
        "documentation": "获取当前的 UTC (协调世界时) 时间，并返回一个 DateTimeObject。\n\n**返回的对象拥有以下属性和方法:**\n- **属性:** `.year`, `.month`, `.day`, `.hour`, `.minute`, `.second`, `.millisecond`, `.day_of_week`, `.day_of_year`\n- **方法:** `.format(fmt)`, `.add_days(n)`, `.add_hours(n)`, 等。\n\n**示例:**\n```lua\nlocal now = datetime.utcnow()\nlog.info('Current year: ' .. now.year)\nctx.set('iso_time', now:format('o'))\n```",
        "insertText": "utcnow()"
      },
      {
        "name": "now",
        "signature": "datetime.now(): DateTimeObject",
        "documentation": "获取当前服务器的本地时间，并返回一个 DateTimeObject。**注意:** 为避免时区问题，推荐在大多数场景下使用 `utcnow()`。",
        "insertText": "now()"
      },
      {
        "name": "parse",
        "signature": "datetime.parse(dateString: string, format?: string): DateTimeObject | nil",
        "documentation": "将字符串解析为 DateTimeObject。\n- 如果 `format` 省略，会尝试解析标准 ISO 8601 格式。\n- 如果提供了 `format`，则会按指定的 .NET 格式字符串进行解析。\n- 如果解析失败，返回 `nil`。\n\n**.NET 格式化参考:**\n- `yyyy`: 四位年份\n- `MM`: 月份 (01-12)\n- `dd`: 日期 (01-31)\n- `HH`: 24小时制小时 (00-23)\n- `mm`: 分钟 (00-59)\n- `ss`: 秒 (00-59)\n\n**示例:**\n```lua\n-- ISO 解析\nlocal event_time = datetime.parse('2024-01-01T12:00:00Z')\n\n-- 自定义格式解析\nlocal log_time = datetime.parse('2024/01/01 14:30', 'yyyy/MM/dd HH:mm')\nif log_time then\n  log.info('Log hour: ' .. log_time.hour)\nend\n```",
        "insertText": "parse('${1:dateString}', '${2:format}')"
      }
    ]
  }
}